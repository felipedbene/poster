*** Update File: post.py

@@ def parse_generated_text(text: str) -> Tuple[Dict, str]:
-    # Flexible search for front-matter fences anywhere at the start
-    match = re.search(r'^\s*---\s*\n(.*?)\n---\s*', text, flags=re.S | re.MULTILINE)
-    if not match:
-        print("⚠️ [DEBUG] No front-matter fences found in text.")
-        return front_matter, body
-    else:
-        fm_text = match.group(1)
-        print("🔍 [DEBUG] YAML front-matter block detected (flexible search):")
-        print(fm_text)
-        body = text[match.end():]
+    # Flexible front-matter: handle missing closing fence
+    match = re.search(r'^\s*---\s*\n(.*?)(?:\n---\s*|$)', text, flags=re.S | re.MULTILINE)
+    if not match:
+        print("⚠️ [DEBUG] No front-matter fences found in text.")
+        return {}, text
+    fm_text = match.group(1)
+    # If there’s no closing '---' immediately after, extract until the first blank line
+    tail = text[match.end():]
+    if not tail.lstrip().startswith('---'):
+        print("⚠️ [DEBUG] Missing closing '---'; extracting until blank line")
+        stripped = text.lstrip()[3:]
+        parts = stripped.split('\n\n', 1)
+        fm_text = parts[0]
+        body = parts[1] if len(parts) > 1 else ""
+    else:
+        print("🔍 [DEBUG] YAML front-matter block detected:")
+        print(fm_text)
+        body = text[match.end():]

@@ def generate_image(prompt):
-        payload = response.json()
-        # Debug: log entire SD API response
-        print("🔍 [DEBUG] SD API response payload:", payload)
-        # Attempt to retrieve image list under either 'images' or 'artifacts'
-        imgs = payload.get("images") or payload.get("artifacts")
-        if not imgs:
-            raise KeyError(f"No image data found in SD API response; keys: {list(payload.keys())}")
-        image_data = imgs[0]
+        payload = response.json()
+        # Debug: log entire SD API response
+        print("🔍 [DEBUG] SD API response payload:", payload)
+        # Detect missing Automatic1111 API
+        if payload.get("detail") == "Not Found":
+            print("❌ AUTOMATIC1111 API endpoint not found. Make sure WebUI is launched with --api on correct host/port.")
+            return None
+        # Attempt to retrieve image list under either 'images' or 'artifacts'
+        imgs = payload.get("images") or payload.get("artifacts")
+        if not imgs:
+            raise KeyError(f"No image data found in SD API response; keys: {list(payload.keys())}")
+        image_data = imgs[0]